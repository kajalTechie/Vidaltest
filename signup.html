<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vida Signup</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
            height: 100vh;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: Arial, sans-serif;
        }

        .signup-card {
            width: 380px;
            background: #102542;
            border-radius: 12px;
            padding: 25px;
            color: white;
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
        }

        .signup-card h4 {
            margin-top: 10px;
            font-weight: bold;
        }

        .signup-card p {
            font-size: 14px;
            color: #cfd8dc;
        }

        .input-group-text {
            background: #0b1d33;
            border: none;
            color: #9fbcd1;
        }

        .form-control {
            background: #0b1d33;
            border: none;
            color: white;
        }

        .form-control::placeholder {
            color: #9fbcd1;
        }

        .form-control:focus {
            background: #0b1d33;
            color: white;
            box-shadow: none;
        }

        .btn-signup {
            background: linear-gradient(to right, #2196f3, #00c6ff);
            border: none;
            font-weight: bold;
        }

        .small-text {
            font-size: 13px;
            color: #9fbcd1;
        }

        a {
            color: #4fc3f7;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        #msg {
            font-size: 13px;
            margin-top: 10px;
        }
    </style>
</head>

<body>

<div class="signup-card text-center">
    <i class="bi bi-person-circle fs-1"></i>
    <h4>Vidal</h4>
    <p>Sign Up</p>

    <!-- Full Name -->
    <div class="input-group mb-3">
        <span class="input-group-text"><i class="bi bi-person"></i></span>
        <input id="username" class="form-control" placeholder="Full Name">
    </div>

    <!-- Email -->
    <div class="input-group mb-3">
        <span class="input-group-text"><i class="bi bi-envelope"></i></span>
        <input id="email" class="form-control" placeholder="Email">
    </div>

    <!-- Password -->
    <div class="input-group mb-3">
        <span class="input-group-text"><i class="bi bi-lock"></i></span>
        <input id="password" type="password" class="form-control" placeholder="Password">
    </div>

    <!-- Confirm Password -->
    <div class="input-group mb-3">
        <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
        <input id="confirm" type="password" class="form-control" placeholder="Confirm Password">
    </div>

    <!-- Terms -->
    <div class="form-check text-start small-text mb-3">
        <input class="form-check-input" type="checkbox" id="terms">
        <label class="form-check-label">
            I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>
        </label>
    </div>

    <button class="btn btn-signup w-100" onclick="signup()">Sign Up</button>

    <div id="msg" class="text-danger text-center"></div>

    <p class="small-text mt-3">
        Already have an account?
        <a href="login.html">Log in</a>
    </p>
</div>

<script>
function signup() {

    const username = document.getElementById("username").value;
    const password = document.getElementById("password").value;
    const confirm  = document.getElementById("confirm").value;
    const terms    = document.getElementById("terms").checked;
    const msg      = document.getElementById("msg");

    if (password !== confirm) {
        msg.innerText = "Passwords do not match";
        return;
    }

    if (!terms) {
        msg.innerText = "Please accept terms and conditions";
        return;
    }

    fetch("/auth/signup", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            username: username,
            password: password,
            role: "ADMIN"
        })
    })
    .then(res => res.text())
    .then(data => {
        alert(data);
        window.location.href = "login.html";
    })
    .catch(() => {
        msg.innerText = "Signup failed";
    });
}
</script>

</body>
</html>
